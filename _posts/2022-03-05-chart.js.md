---
layout: post
title: "[JavaScript] chart.js란?"
date: 2022-03-05
excerpt: "chart.js에 대해 알아보자"
categories: JavaScript
tags: [study, JavaScript]
comments: true
---

### chart.js
 - 자바스크립트로 차트를 그릴 수 있게 해주는 라이브러리
 - html의 canvas태그로 차트를 구현
 - 바형, 그래프형, 원형, 도넛형 등 다양한 차트 모양 

### 사용법

#### 1. CDN또는 Git hub에서 다운

 ```javascript
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
 ```

#### 2. 차트를 그릴 부분에 canvas와 id 선언 후 script로 차트를 그릴 코드를 작성

- 3개의 그래프를 그릴 공간에 canvas 선언 
 
```javascript
    <div class="chart">
        <p>회원 현황</p>
        <canvas id="myChart1" width="500" height="300"></canvas>
    </div>
    <div class="chart2">
        <p>강사 현황</p>
        <canvas id="myChart2" width="500" height="300"></canvas>
    </div>
    <div class="chart3">
        <canvas id="myChart3" width="500" height="300"></canvas>
    </div>	
```

- 배열 데이터를 넘겨 바그래프와 원형그래프를 구현

```javascript
    <script>
        $(document).ready(function(){
            $.ajax({
                url:"memChart.ad",
                success:function(result){
                    
                    let date = [];
                    let newMem = [];
                    let sleepMem = [];
                    let delMem = [];
                    let newTeacher = [];
                    let sleepTeacher = [];
                    let delTeacher = [];
                    
                    for(let i in result.memList){
                        date.push(result.memList[i].staDate);
                        newMem.push(result.memList[i].newMem);
                        sleepMem.push(result.memList[i].sleepMem);
                        delMem.push(result.memList[i].delMem);
                    }
                    
                    for(let i in result.teacherList){
                        newTeacher.push(result.teacherList[i].newTeacher);
                        sleepTeacher.push(result.teacherList[i].sleepTeacher);
                        delTeacher.push(result.teacherList[i].delTeacher);
                    }
                    
                    // 회원 그래프
                    let ctx1 = document.getElementById('myChart1').getContext('2d');
                    let myChart1 = new Chart(ctx1, {
                        type: 'bar',
                        data: {
                            labels: date,		// x축 기준 설정
                            datasets: [{
                                label: '신규회원',
                                type : 'bar',         
                                backgroundColor: 'rgb(100, 100, 252)',
                                borderColor: 'rgb(255, 153, 0)',
                                data: newMem
                            }, {
                                label: '휴먼회원',
                                type : 'bar',        
                                backgroundColor: 'rgb(100, 200, 100)',
                                borderColor: 'rgb(255, 153, 0)',
                                data: sleepMem
                            }, {
                                label: '탈퇴회원',
                                type : 'bar',
                                backgroundColor: 'rgb(255, 100, 100)',
                                borderColor: 'rgb(255, 204, 0)',
                                data: delMem
                            }]
                        },
                        // Configuration options
                        options: {
                            responsive: false,
                            legend: {
                                labels: {
                                    fontColor: 'white' // label color
                                    }
                                },
                            scales: {
                                // y축
                                yAxes: [{
                                    stacked: true,
                                    ticks: {
                                        fontColor:'white' // y축 폰트 color
                                    }
                                }],
                                // x축
                                xAxes: [{
                                    stacked: true,
                                    ticks: {
                                        fontColor:'white' // x축 폰트 color
                                    }
                                }]
                            }
                        }
                    });
                    
                    // 강사 그래프
                    let ctx2 = document.getElementById('myChart2').getContext('2d');
                    let myChart2 = new Chart(ctx2, {
                        type: 'bar',
                        data: {
                            labels: date,		
                            datasets: [{
                                label: '신규강사',
                                type : 'bar',         
                                backgroundColor: 'rgb(100, 100, 252)',
                                borderColor: 'rgb(255, 153, 0)',
                                data: newTeacher
                            }, {
                                label: '휴먼강사',
                                type : 'bar',        
                                backgroundColor: 'rgb(100, 200, 100)',
                                borderColor: 'rgb(255, 153, 0)',
                                data: sleepTeacher
                            }, {
                                label: '탈퇴강사',
                                type : 'bar',
                                backgroundColor: 'rgb(255, 100, 100)',
                                borderColor: 'rgb(255, 204, 0)',
                                data: delTeacher
                            }]
                        },
                        options: {
                            responsive: false,
                            legend: {
                                labels: {
                                    fontColor: 'white' 
                                    }
                                },
                            scales: {
                                // y축
                                yAxes: [{
                                    stacked: true,
                                    ticks: {
                                        fontColor:'white' 
                                    }
                                }],
                                // x축
                                xAxes: [{
                                    stacked: true,
                                    ticks: {
                                        fontColor:'white' 
                                    }
                                }]
                            }
                        }
                    });
                    
                    const today = new Date();
                    const years = today.getFullYear();
                    const months = today.getMonth() + 1;
                    const dates = today.getDate();
                    const indexDate = years + '/' + months + '/' + dates;
                    document.getElementById("currentDate").innerHTML = indexDate;
                    document.getElementById("class").innerHTML = result.classQna;
                    document.getElementById("store").innerHTML = result.storeQna;
                    document.getElementById("etc").innerHTML = result.etcQna;
                    
                    // 문의사항 그래프
                    let ctx3 = document.getElementById('myChart3').getContext('2d');
                    let myChart3 = new Chart(ctx3, {
                        type: 'pie',
                        data: {
                            labels: ["클래스","스토어","기타"],
                            datasets: [{
                                backgroundColor: ["#3e95cd", "#3cba9f", "#c45850"],
                                data: [result.classQna, result.storeQna, result.etcQna]
                            }]
                        },
                        options: {
                            title: {
                                display: true,
                                text: '문의사항 내역'
                            },
                            responsive: true,
                            legend: false,
                            pieceLabel: {
                                mode:"label",
                                position:"default",
                                fontSize: 16,
                                fontStyle:'bold'
                            }
                        }
                    });
                },error:function(){
                    
                }
            })
        });
    
    </script>
```

#### 3. 결과화면

![1](https://user-images.githubusercontent.com/93863500/158010418-60d7710d-457f-42c2-b20e-e9563cf161bd.JPG)

#### 참고
 - 수업자료
 - <a href='https://www.chartjs.org/'>Chart.js</a>