I"Z<style>
	h3{
		background-color:#D2D2FF;
		color: gray;
	}
</style>

<h2 id="1-xml파일이란">1. xml파일이란?</h2>

<ul>
  <li>EXtensible Markup Language의 약자</li>
  <li>데이터를 저장하고, 저장되는 데이터의 구조를 기술하여 전달할 목적으로 만들어진 언어<br /></li>
</ul>

<h3 id="1-특징">1) 특징</h3>
<ul>
  <li>다른 목적의 마크업 언어를 만다는데 사용되는 다목적 마크업 언어</li>
  <li>다른 시스템끼리 다양한 종류의 데이터를 쉽게 교환하게 해줌</li>
  <li>새로운 태그 추가도 가능하고 사용자가 직접 정의도 가능</li>
  <li>텍스트 데이터 형식의 언어로 유니코드 문자로만 이루어짐</li>
</ul>

<h3 id="2-목적">2) 목적</h3>
<ul>
  <li>서로 호환되지 않는 데이터 타입을 사용하는 시스템 간의 데이터 교환은 시간이 많이 걸리고 데이터 손실도 발생함<br />
   =&gt; 데이터를 텍스트 형식으로 저장하여 os나 브라우저 등에 상관없이 독립적으로 데이터를 저장하고 서로 다른 주체간에 정보를 쉽게 전달할 수 있다.</li>
</ul>

<h3 id="3-스키마">3) 스키마</h3>
<ul>
  <li>xml이 다른 언어를 정의하기 위해 해당 언어의 필요 요소와 속성 정보를 모아놓은 것</li>
  <li>작성방법 : DTD / XSD<br /></li>
</ul>

<h4 id="1dtddocument-type-definition">(1)DTD(Document Type Definition)</h4>
<ul>
  <li>XML문서의 구조 및 해당 문서에서 사용할 엔티티 등을 정의함</li>
  <li>문서 내부 명시 또는 별도의 파일로 분리</li>
  <li>데이터 교환의 표준으로써 활용되거나 XML문서의 구문 및 구조에 대한 유효셩 검사 가능</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;!DOCTYPE 루트요소 DTD식별자 [ 선언1 선언2 ... ]&gt;</code>
<br /><br /></li>
</ul>

<h2 id="2-mapperxml">2. mapper.xml</h2>
<h3 id="1-xml과-dtd-선언">1) XML과 DTD 선언</h3>
<pre><code class="language-javaScript">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;
</code></pre>

<h3 id="2--작성">2) <mapper> 작성</mapper></h3>
<ul>
  <li>SQL mapper의 루트 엘리먼트로 모든 SQL문은 mapper 안에 기술함</li>
  <li>namespace : 해당 mapper파일의 고유한 별칭 등록</li>
</ul>

<h3 id="3-select-insert-update-delete">3) select, insert, update, delete</h3>
<h4 id="1-dml문">(1) DML문</h4>
<p><code class="language-plaintext highlighter-rouge">&lt;insert|update|delete id="식별자" [parameterType="전달받을자바타입(패키지포함풀클래스명)|별칭"]&gt; &lt;/insert|update|delete&gt;</code></p>
<ul>
  <li>실행결과가 int이므로 result속성이 필요 X</li>
</ul>

<pre><code class="language-javaScript">&lt;update id="increaseCount" parameterType="_int"&gt;
    update
            board
        set count = count+1
        where board_no = #{boardNo}
        and status = 'Y'
&lt;/update&gt;
</code></pre>

<table>
  <thead>
    <tr>
      <th style="text-align: center">종류</th>
      <th style="text-align: center">설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">id</td>
      <td style="text-align: center">해당 SQL문의 구분자(고유 이름)</td>
    </tr>
    <tr>
      <td style="text-align: center">parameterType</td>
      <td style="text-align: center">구문에 전달된 파라미터의 전체 클래스명이나 별칭</td>
    </tr>
  </tbody>
</table>

<h4 id="2-select문">(2) SELECT문</h4>
<p><code class="language-plaintext highlighter-rouge">&lt;select id="식별자" [parameterType="전달받을자바타입(패키지포함풀클래스명)|별칭"] resultType="조회결과반환하고자하는자바타입" | resultMap="조회결과를뽑아서mapping할resultMap의 id"&gt; &lt;/select&gt;</code></p>

<pre><code class="language-javaScript">&lt;select id="selectListCount" resultType="_int"&gt;
    select
           count(*)
      from board
     where status = 'Y'
&lt;/select&gt;
</code></pre>

<table>
  <thead>
    <tr>
      <th style="text-align: center">종류</th>
      <th style="text-align: center">설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">resultType</td>
      <td style="text-align: center">select문 실행 결과를 담을 객체</td>
    </tr>
    <tr>
      <td style="text-align: center">resultMap</td>
      <td style="text-align: center">select문 실행 결과를 담을 객체를 resultMap으로 지정, 따로 선언해야함</td>
    </tr>
  </tbody>
</table>

<h4 id="--resultmap">- resultMap</h4>
<p>sql컬럼값과 vo객체의 필드값을 매핑시켜주는 역할로 <strong>마이바티스의 핵심 기능</strong></p>

<pre><code class="language-javaScript">&lt;resultMap id="replyResultSet" type="Reply"&gt;
    &lt;result column="reply_no" property="replyNo" /&gt;
    &lt;result column="user_id" property="replyWriter" /&gt;
    &lt;result column="reply_content" property="replyContent" /&gt;
    &lt;result column="create_date" property="createDate" /&gt;
&lt;/resultMap&gt;

&lt;select id="selectReplyList" resultMap="replyResultSet" parameterType="reply"&gt;
    select
            reply_no
            , reply_content
        from reply r
        join member on (reply_writer=user_no)
        where ref_bno = #{boardNo}
&lt;/select&gt;

</code></pre>

<h4 id="출처">출처</h4>

<ul>
  <li>수업자료</li>
  <li><a href="https://www.w3schools.com/">w3schools</a></li>
  <li><a href="https://mybatis.org/mybatis-3/ko/getting-started.html">마이바티스 공식문서</a></li>
</ul>

:ET